//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/larry/dev/workspace/realtime/realtime-channel/src/main/java/com/goodow/realtime/channel/impl/SimpleBus.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/goodow/realtime/channel/Bus.h"
#include "com/goodow/realtime/channel/BusHook.h"
#include "com/goodow/realtime/channel/Message.h"
#include "com/goodow/realtime/channel/State.h"
#include "com/goodow/realtime/channel/impl/MessageImpl.h"
#include "com/goodow/realtime/channel/impl/SimpleBus.h"
#include "com/goodow/realtime/channel/util/IdGenerator.h"
#include "com/goodow/realtime/core/Handler.h"
#include "com/goodow/realtime/core/Platform.h"
#include "com/goodow/realtime/core/Registration.h"
#include "com/goodow/realtime/core/Scheduler.h"
#include "com/goodow/realtime/json/Json.h"
#include "com/goodow/realtime/json/JsonArray.h"
#include "com/goodow/realtime/json/JsonObject.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Throwable.h"
#include "java/lang/Void.h"
#include "java/util/logging/Level.h"
#include "java/util/logging/Logger.h"

__attribute__((unused)) static void ComGoodowRealtimeChannelImplSimpleBus_doReceiveMessageWithComGoodowRealtimeChannelMessage_(ComGoodowRealtimeChannelImplSimpleBus *self, id<ComGoodowRealtimeChannelMessage> message);
__attribute__((unused)) static void ComGoodowRealtimeChannelImplSimpleBus_handleWithNSString_withId_withId_(ComGoodowRealtimeChannelImplSimpleBus *self, NSString *topic, id handler, id message);
__attribute__((unused)) static void ComGoodowRealtimeChannelImplSimpleBus_scheduleHandleWithNSString_withId_withComGoodowRealtimeChannelMessage_(ComGoodowRealtimeChannelImplSimpleBus *self, NSString *topic, id handler, id<ComGoodowRealtimeChannelMessage> message);
__attribute__((unused)) static id<ComGoodowRealtimeCoreRegistration> ComGoodowRealtimeChannelImplSimpleBus_subscribeImplWithBoolean_withNSString_withComGoodowRealtimeCoreHandler_(ComGoodowRealtimeChannelImplSimpleBus *self, jboolean local, NSString *topic, id<ComGoodowRealtimeCoreHandler> handler);

@interface ComGoodowRealtimeChannelImplSimpleBus () {
 @public
  id<ComGoodowRealtimeJsonJsonObject> handlerMap_;
}

- (void)doReceiveMessageWithComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)message;

- (void)handleWithNSString:(NSString *)topic
                    withId:(id)handler
                    withId:(id)message;

- (void)scheduleHandleWithNSString:(NSString *)topic
                            withId:(id)handler
withComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)message;

- (id<ComGoodowRealtimeCoreRegistration>)subscribeImplWithBoolean:(jboolean)local
                                                     withNSString:(NSString *)topic
                                 withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler;
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus, handlerMap_, id<ComGoodowRealtimeJsonJsonObject>)

@interface ComGoodowRealtimeChannelImplSimpleBus_$1 () {
 @public
  id<ComGoodowRealtimeJsonJsonArray> val$copy_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$1, val$copy_, id<ComGoodowRealtimeJsonJsonArray>)

@interface ComGoodowRealtimeChannelImplSimpleBus_$2 () {
 @public
  ComGoodowRealtimeChannelImplSimpleBus *this$0_;
  NSString *val$topic_;
  id<ComGoodowRealtimeChannelMessage> val$message_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$2, this$0_, ComGoodowRealtimeChannelImplSimpleBus *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$2, val$topic_, NSString *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$2, val$message_, id<ComGoodowRealtimeChannelMessage>)

@interface ComGoodowRealtimeChannelImplSimpleBus_$3 () {
 @public
  ComGoodowRealtimeChannelImplSimpleBus *this$0_;
  NSString *val$topic_;
  id val$handler_;
  id<ComGoodowRealtimeChannelMessage> val$message_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$3, this$0_, ComGoodowRealtimeChannelImplSimpleBus *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$3, val$topic_, NSString *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$3, val$handler_, id)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$3, val$message_, id<ComGoodowRealtimeChannelMessage>)

@interface ComGoodowRealtimeChannelImplSimpleBus_$4 () {
 @public
  ComGoodowRealtimeChannelImplSimpleBus *this$0_;
  jboolean val$local_;
  NSString *val$topic_;
  id<ComGoodowRealtimeCoreHandler> val$handler_;
}
@end

J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$4, this$0_, ComGoodowRealtimeChannelImplSimpleBus *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$4, val$topic_, NSString *)
J2OBJC_FIELD_SETTER(ComGoodowRealtimeChannelImplSimpleBus_$4, val$handler_, id<ComGoodowRealtimeCoreHandler>)

BOOL ComGoodowRealtimeChannelImplSimpleBus_initialized = NO;

@implementation ComGoodowRealtimeChannelImplSimpleBus

JavaUtilLoggingLogger * ComGoodowRealtimeChannelImplSimpleBus_log_;

+ (void)checkNotNullWithNSString:(NSString *)paramName
                          withId:(id)param {
  ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(paramName, param);
}

- (instancetype)init {
  if (self = [super init]) {
    handlerMap_ = ComGoodowRealtimeJsonJson_createObject();
    replyHandlers_ = ComGoodowRealtimeJsonJson_createObject();
    idGenerator_ = [[ComGoodowRealtimeChannelUtilIdGenerator alloc] init];
  }
  return self;
}

- (void)close {
  if (hook_ == nil || [hook_ handlePreClose]) {
    [self doClose];
  }
}

- (ComGoodowRealtimeChannelStateEnum *)getReadyState {
  return handlerMap_ == nil ? ComGoodowRealtimeChannelStateEnum_get_CLOSED() : ComGoodowRealtimeChannelStateEnum_get_OPEN();
}

- (NSString *)getSessionId {
  return @"@";
}

- (id<ComGoodowRealtimeChannelBus>)publishWithNSString:(NSString *)topic
                                                withId:(id)msg {
  [self internalHandleSendOrPubWithBoolean:NO withBoolean:NO withNSString:topic withId:msg withComGoodowRealtimeCoreHandler:nil];
  return self;
}

- (id<ComGoodowRealtimeChannelBus>)publishLocalWithNSString:(NSString *)topic
                                                     withId:(id)msg {
  [self internalHandleSendOrPubWithBoolean:YES withBoolean:NO withNSString:topic withId:msg withComGoodowRealtimeCoreHandler:nil];
  return self;
}

- (id<ComGoodowRealtimeCoreRegistration>)subscribeWithNSString:(NSString *)topic
                              withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  return ComGoodowRealtimeChannelImplSimpleBus_subscribeImplWithBoolean_withNSString_withComGoodowRealtimeCoreHandler_(self, NO, topic, handler);
}

- (id<ComGoodowRealtimeCoreRegistration>)subscribeLocalWithNSString:(NSString *)topic
                                   withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  return ComGoodowRealtimeChannelImplSimpleBus_subscribeImplWithBoolean_withNSString_withComGoodowRealtimeCoreHandler_(self, YES, topic, handler);
}

- (id<ComGoodowRealtimeChannelBus>)sendWithNSString:(NSString *)topic
                                             withId:(id)msg
                   withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)replyHandler {
  [self internalHandleSendOrPubWithBoolean:NO withBoolean:YES withNSString:topic withId:msg withComGoodowRealtimeCoreHandler:replyHandler];
  return self;
}

- (id<ComGoodowRealtimeChannelBus>)sendLocalWithNSString:(NSString *)topic
                                                  withId:(id)msg
                        withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)replyHandler {
  [self internalHandleSendOrPubWithBoolean:YES withBoolean:YES withNSString:topic withId:msg withComGoodowRealtimeCoreHandler:replyHandler];
  return self;
}

- (id<ComGoodowRealtimeChannelBus>)setHookWithComGoodowRealtimeChannelBusHook:(id<ComGoodowRealtimeChannelBusHook>)hook {
  self->hook_ = hook;
  return self;
}

- (void)doClose {
  (void) [self publishLocalWithNSString:ComGoodowRealtimeChannelBus_get_ON_CLOSE_() withId:nil];
  [self clearHandlers];
  if (hook_ != nil) {
    [hook_ handlePostClose];
  }
}

- (jboolean)doSubscribeWithBoolean:(jboolean)local
                      withNSString:(NSString *)topic
  withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(@"topic", topic);
  ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(@"handler", handler);
  id<ComGoodowRealtimeJsonJsonArray> handlers = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(handlerMap_)) getArrayWithNSString:topic];
  if (handlers == nil) {
    (void) [handlerMap_ setWithNSString:topic withId:[((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(ComGoodowRealtimeJsonJson_createArray())) pushWithId:handler]];
    return YES;
  }
  if ([((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(handlers)) indexOfWithId:handler] == -1) {
    (void) [handlers pushWithId:handler];
    return YES;
  }
  return NO;
}

- (void)doSendOrPubWithBoolean:(jboolean)local
                   withBoolean:(jboolean)send
                  withNSString:(NSString *)topic
                        withId:(id)msg
withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)replyHandler {
  ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(@"topic", topic);
  NSString *replyTopic = nil;
  if (replyHandler != nil) {
    replyTopic = [self makeUUID];
    (void) [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(replyHandlers_)) setWithNSString:replyTopic withId:replyHandler];
  }
  ComGoodowRealtimeChannelImplMessageImpl *message = [[ComGoodowRealtimeChannelImplMessageImpl alloc] initWithBoolean:local withBoolean:send withComGoodowRealtimeChannelBus:self withNSString:topic withNSString:replyTopic withId:msg];
  if (![self internalHandleReceiveMessageWithComGoodowRealtimeChannelMessage:message] && replyTopic != nil) {
    (void) [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(replyHandlers_)) removeWithNSString:replyTopic];
  }
}

- (jboolean)doUnsubscribeWithBoolean:(jboolean)local
                        withNSString:(NSString *)topic
    withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(@"topic", topic);
  ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(@"handler", handler);
  id<ComGoodowRealtimeJsonJsonArray> handlers = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(handlerMap_)) getArrayWithNSString:topic];
  if (handlers == nil) {
    return NO;
  }
  jboolean removed = [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(handlers)) removeValueWithId:handler];
  if ([handlers length] == 0) {
    (void) [handlerMap_ removeWithNSString:topic];
  }
  return removed;
}

- (void)clearHandlers {
  (void) [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(replyHandlers_)) clear];
  (void) [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(handlerMap_)) clear];
  handlerMap_ = nil;
}

- (jboolean)internalHandleReceiveMessageWithComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)message {
  if ([((id<ComGoodowRealtimeChannelMessage>) nil_chk(message)) isLocal] || hook_ == nil || [hook_ handleReceiveMessageWithComGoodowRealtimeChannelMessage:message]) {
    ComGoodowRealtimeChannelImplSimpleBus_doReceiveMessageWithComGoodowRealtimeChannelMessage_(self, message);
    return YES;
  }
  return NO;
}

- (void)internalHandleSendOrPubWithBoolean:(jboolean)local
                               withBoolean:(jboolean)send
                              withNSString:(NSString *)topic
                                    withId:(id)msg
          withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)replyHandler {
  if (local || hook_ == nil || [hook_ handleSendOrPubWithBoolean:send withNSString:topic withId:msg withComGoodowRealtimeCoreHandler:replyHandler]) {
    [self doSendOrPubWithBoolean:local withBoolean:send withNSString:topic withId:msg withComGoodowRealtimeCoreHandler:replyHandler];
  }
}

- (NSString *)makeUUID {
  return [((ComGoodowRealtimeChannelUtilIdGenerator *) nil_chk(idGenerator_)) nextWithInt:36];
}

- (void)doReceiveMessageWithComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)message {
  ComGoodowRealtimeChannelImplSimpleBus_doReceiveMessageWithComGoodowRealtimeChannelMessage_(self, message);
}

- (void)handleWithNSString:(NSString *)topic
                    withId:(id)handler
                    withId:(id)message {
  ComGoodowRealtimeChannelImplSimpleBus_handleWithNSString_withId_withId_(self, topic, handler, message);
}

- (void)scheduleHandleWithNSString:(NSString *)topic
                            withId:(id)handler
withComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)message {
  ComGoodowRealtimeChannelImplSimpleBus_scheduleHandleWithNSString_withId_withComGoodowRealtimeChannelMessage_(self, topic, handler, message);
}

- (id<ComGoodowRealtimeCoreRegistration>)subscribeImplWithBoolean:(jboolean)local
                                                     withNSString:(NSString *)topic
                                 withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)handler {
  return ComGoodowRealtimeChannelImplSimpleBus_subscribeImplWithBoolean_withNSString_withComGoodowRealtimeCoreHandler_(self, local, topic, handler);
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelImplSimpleBus *)other {
  [super copyAllFieldsTo:other];
  other->handlerMap_ = handlerMap_;
  other->replyHandlers_ = replyHandlers_;
  other->hook_ = hook_;
  other->idGenerator_ = idGenerator_;
}

+ (void)initialize {
  if (self == [ComGoodowRealtimeChannelImplSimpleBus class]) {
    ComGoodowRealtimeChannelImplSimpleBus_log_ = JavaUtilLoggingLogger_getLoggerWithNSString_([ComGoodowRealtimeChannelImplSimpleBus_class_() getName]);
    J2OBJC_SET_INITIALIZED(ComGoodowRealtimeChannelImplSimpleBus)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "checkNotNullWithNSString:withId:", "checkNotNull", "V", 0x8, NULL },
    { "init", "SimpleBus", NULL, 0x1, NULL },
    { "close", NULL, "V", 0x1, NULL },
    { "getReadyState", NULL, "Lcom.goodow.realtime.channel.State;", 0x1, NULL },
    { "getSessionId", NULL, "Ljava.lang.String;", 0x1, NULL },
    { "publishWithNSString:withId:", "publish", "Lcom.goodow.realtime.channel.Bus;", 0x1, NULL },
    { "publishLocalWithNSString:withId:", "publishLocal", "Lcom.goodow.realtime.channel.Bus;", 0x1, NULL },
    { "subscribeWithNSString:withComGoodowRealtimeCoreHandler:", "subscribe", "Lcom.goodow.realtime.core.Registration;", 0x1, NULL },
    { "subscribeLocalWithNSString:withComGoodowRealtimeCoreHandler:", "subscribeLocal", "Lcom.goodow.realtime.core.Registration;", 0x1, NULL },
    { "sendWithNSString:withId:withComGoodowRealtimeCoreHandler:", "send", "Lcom.goodow.realtime.channel.Bus;", 0x1, NULL },
    { "sendLocalWithNSString:withId:withComGoodowRealtimeCoreHandler:", "sendLocal", "Lcom.goodow.realtime.channel.Bus;", 0x1, NULL },
    { "setHookWithComGoodowRealtimeChannelBusHook:", "setHook", "Lcom.goodow.realtime.channel.Bus;", 0x1, NULL },
    { "doClose", NULL, "V", 0x4, NULL },
    { "doSubscribeWithBoolean:withNSString:withComGoodowRealtimeCoreHandler:", "doSubscribe", "Z", 0x4, NULL },
    { "doSendOrPubWithBoolean:withBoolean:withNSString:withId:withComGoodowRealtimeCoreHandler:", "doSendOrPub", "V", 0x4, NULL },
    { "doUnsubscribeWithBoolean:withNSString:withComGoodowRealtimeCoreHandler:", "doUnsubscribe", "Z", 0x4, NULL },
    { "clearHandlers", NULL, "V", 0x0, NULL },
    { "internalHandleReceiveMessageWithComGoodowRealtimeChannelMessage:", "internalHandleReceiveMessage", "Z", 0x0, NULL },
    { "internalHandleSendOrPubWithBoolean:withBoolean:withNSString:withId:withComGoodowRealtimeCoreHandler:", "internalHandleSendOrPub", "V", 0x0, NULL },
    { "makeUUID", NULL, "Ljava.lang.String;", 0x0, NULL },
    { "doReceiveMessageWithComGoodowRealtimeChannelMessage:", "doReceiveMessage", "V", 0x2, NULL },
    { "handleWithNSString:withId:withId:", "handle", "V", 0x2, NULL },
    { "scheduleHandleWithNSString:withId:withComGoodowRealtimeChannelMessage:", "scheduleHandle", "V", 0x2, NULL },
    { "subscribeImplWithBoolean:withNSString:withComGoodowRealtimeCoreHandler:", "subscribeImpl", "Lcom.goodow.realtime.core.Registration;", 0x2, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "log_", NULL, 0x1a, "Ljava.util.logging.Logger;", &ComGoodowRealtimeChannelImplSimpleBus_log_,  },
    { "handlerMap_", NULL, 0x2, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
    { "replyHandlers_", NULL, 0x10, "Lcom.goodow.realtime.json.JsonObject;", NULL,  },
    { "hook_", NULL, 0x0, "Lcom.goodow.realtime.channel.BusHook;", NULL,  },
    { "idGenerator_", NULL, 0x10, "Lcom.goodow.realtime.channel.util.IdGenerator;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeChannelImplSimpleBus = { 1, "SimpleBus", "com.goodow.realtime.channel.impl", NULL, 0x1, 24, methods, 5, fields, 0, NULL};
  return &_ComGoodowRealtimeChannelImplSimpleBus;
}

@end

void ComGoodowRealtimeChannelImplSimpleBus_checkNotNullWithNSString_withId_(NSString *paramName, id param) {
  ComGoodowRealtimeChannelImplSimpleBus_init();
  if (param == nil) {
    @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$", @"Parameter ", paramName, @" must be specified")];
  }
}

void ComGoodowRealtimeChannelImplSimpleBus_doReceiveMessageWithComGoodowRealtimeChannelMessage_(ComGoodowRealtimeChannelImplSimpleBus *self, id<ComGoodowRealtimeChannelMessage> message) {
  NSString *topic = [((id<ComGoodowRealtimeChannelMessage>) nil_chk(message)) topic];
  id<ComGoodowRealtimeJsonJsonArray> handlers = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(self->handlerMap_)) getArrayWithNSString:topic];
  if (handlers != nil) {
    id<ComGoodowRealtimeJsonJsonArray> copy_ = ComGoodowRealtimeJsonJson_createArray();
    [handlers forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeChannelImplSimpleBus_$1 alloc] initWithComGoodowRealtimeJsonJsonArray:copy_]];
    [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(copy_)) forEachWithComGoodowRealtimeJsonJsonArray_ListIterator:[[ComGoodowRealtimeChannelImplSimpleBus_$2 alloc] initWithComGoodowRealtimeChannelImplSimpleBus:self withNSString:topic withComGoodowRealtimeChannelMessage:message]];
  }
  else {
    id handler = [((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(self->replyHandlers_)) getWithNSString:topic];
    if (handler != nil) {
      (void) [self->replyHandlers_ removeWithNSString:topic];
      ComGoodowRealtimeChannelImplSimpleBus_scheduleHandleWithNSString_withId_withComGoodowRealtimeChannelMessage_(self, topic, handler, message);
    }
  }
}

void ComGoodowRealtimeChannelImplSimpleBus_handleWithNSString_withId_withId_(ComGoodowRealtimeChannelImplSimpleBus *self, NSString *topic, id handler, id message) {
  @try {
    [((id<ComGoodowRealtimeCoreScheduler>) nil_chk(ComGoodowRealtimeCorePlatform_scheduler())) handleWithId:handler withId:message];
  }
  @catch (JavaLangThrowable *e) {
    [((JavaUtilLoggingLogger *) nil_chk(ComGoodowRealtimeChannelImplSimpleBus_log_)) logWithJavaUtilLoggingLevel:JavaUtilLoggingLevel_get_WARNING_() withNSString:JreStrcat("$$", @"Failed to handle on topic: ", topic) withJavaLangThrowable:e];
    (void) [self publishLocalWithNSString:ComGoodowRealtimeChannelBus_get_ON_ERROR_() withId:[((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk([((id<ComGoodowRealtimeJsonJsonObject>) nil_chk(ComGoodowRealtimeJsonJson_createObject())) setWithNSString:@"topic" withId:topic])) setWithNSString:@"message" withId:message])) setWithNSString:@"cause" withId:e]];
  }
}

void ComGoodowRealtimeChannelImplSimpleBus_scheduleHandleWithNSString_withId_withComGoodowRealtimeChannelMessage_(ComGoodowRealtimeChannelImplSimpleBus *self, NSString *topic, id handler, id<ComGoodowRealtimeChannelMessage> message) {
  if ([((id<ComGoodowRealtimeChannelMessage>) nil_chk(message)) isLocal]) {
    ComGoodowRealtimeChannelImplSimpleBus_handleWithNSString_withId_withId_(self, topic, handler, message);
  }
  else {
    [((id<ComGoodowRealtimeCoreScheduler>) nil_chk(ComGoodowRealtimeCorePlatform_scheduler())) scheduleDeferredWithComGoodowRealtimeCoreHandler:[[ComGoodowRealtimeChannelImplSimpleBus_$3 alloc] initWithComGoodowRealtimeChannelImplSimpleBus:self withNSString:topic withId:handler withComGoodowRealtimeChannelMessage:message]];
  }
}

id<ComGoodowRealtimeCoreRegistration> ComGoodowRealtimeChannelImplSimpleBus_subscribeImplWithBoolean_withNSString_withComGoodowRealtimeCoreHandler_(ComGoodowRealtimeChannelImplSimpleBus *self, jboolean local, NSString *topic, id<ComGoodowRealtimeCoreHandler> handler) {
  [self doSubscribeWithBoolean:local withNSString:topic withComGoodowRealtimeCoreHandler:handler];
  return [[ComGoodowRealtimeChannelImplSimpleBus_$4 alloc] initWithComGoodowRealtimeChannelImplSimpleBus:self withBoolean:local withNSString:topic withComGoodowRealtimeCoreHandler:handler];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeChannelImplSimpleBus)

@implementation ComGoodowRealtimeChannelImplSimpleBus_$1

- (void)callWithInt:(jint)index
             withId:(id)value {
  (void) [((id<ComGoodowRealtimeJsonJsonArray>) nil_chk(val$copy_)) pushWithId:value];
}

- (instancetype)initWithComGoodowRealtimeJsonJsonArray:(id<ComGoodowRealtimeJsonJsonArray>)capture$0 {
  val$copy_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelImplSimpleBus_$1 *)other {
  [super copyAllFieldsTo:other];
  other->val$copy_ = val$copy_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithInt:withId:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeJsonJsonArray:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$copy_", NULL, 0x1012, "Lcom.goodow.realtime.json.JsonArray;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeChannelImplSimpleBus_$1 = { 1, "$1", "com.goodow.realtime.channel.impl", "SimpleBus", 0x8000, 2, methods, 1, fields, 0, NULL};
  return &_ComGoodowRealtimeChannelImplSimpleBus_$1;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeChannelImplSimpleBus_$1)

@implementation ComGoodowRealtimeChannelImplSimpleBus_$2

- (void)callWithInt:(jint)index
             withId:(id)value {
  ComGoodowRealtimeChannelImplSimpleBus_scheduleHandleWithNSString_withId_withComGoodowRealtimeChannelMessage_(this$0_, val$topic_, value, val$message_);
}

- (instancetype)initWithComGoodowRealtimeChannelImplSimpleBus:(ComGoodowRealtimeChannelImplSimpleBus *)outer$
                                                 withNSString:(NSString *)capture$0
                          withComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)capture$1 {
  this$0_ = outer$;
  val$topic_ = capture$0;
  val$message_ = capture$1;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelImplSimpleBus_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$topic_ = val$topic_;
  other->val$message_ = val$message_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithInt:withId:", "call", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeChannelImplSimpleBus:withNSString:withComGoodowRealtimeChannelMessage:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.channel.impl.SimpleBus;", NULL,  },
    { "val$topic_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
    { "val$message_", NULL, 0x1012, "Lcom.goodow.realtime.channel.Message;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeChannelImplSimpleBus_$2 = { 1, "$2", "com.goodow.realtime.channel.impl", "SimpleBus", 0x8000, 2, methods, 3, fields, 0, NULL};
  return &_ComGoodowRealtimeChannelImplSimpleBus_$2;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeChannelImplSimpleBus_$2)

@implementation ComGoodowRealtimeChannelImplSimpleBus_$3

- (void)handleWithId:(id)ignore {
  ComGoodowRealtimeChannelImplSimpleBus_handleWithNSString_withId_withId_(this$0_, val$topic_, val$handler_, val$message_);
}

- (instancetype)initWithComGoodowRealtimeChannelImplSimpleBus:(ComGoodowRealtimeChannelImplSimpleBus *)outer$
                                                 withNSString:(NSString *)capture$0
                                                       withId:(id)capture$1
                          withComGoodowRealtimeChannelMessage:(id<ComGoodowRealtimeChannelMessage>)capture$2 {
  this$0_ = outer$;
  val$topic_ = capture$0;
  val$handler_ = capture$1;
  val$message_ = capture$2;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelImplSimpleBus_$3 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$topic_ = val$topic_;
  other->val$handler_ = val$handler_;
  other->val$message_ = val$message_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "handleWithJavaLangVoid:", "handle", "V", 0x1, NULL },
    { "initWithComGoodowRealtimeChannelImplSimpleBus:withNSString:withId:withComGoodowRealtimeChannelMessage:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.channel.impl.SimpleBus;", NULL,  },
    { "val$topic_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
    { "val$handler_", NULL, 0x1012, "Ljava.lang.Object;", NULL,  },
    { "val$message_", NULL, 0x1012, "Lcom.goodow.realtime.channel.Message;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeChannelImplSimpleBus_$3 = { 1, "$3", "com.goodow.realtime.channel.impl", "SimpleBus", 0x8000, 2, methods, 4, fields, 0, NULL};
  return &_ComGoodowRealtimeChannelImplSimpleBus_$3;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeChannelImplSimpleBus_$3)

@implementation ComGoodowRealtimeChannelImplSimpleBus_$4

- (void)unregister {
  [this$0_ doUnsubscribeWithBoolean:val$local_ withNSString:val$topic_ withComGoodowRealtimeCoreHandler:val$handler_];
}

- (instancetype)initWithComGoodowRealtimeChannelImplSimpleBus:(ComGoodowRealtimeChannelImplSimpleBus *)outer$
                                                  withBoolean:(jboolean)capture$0
                                                 withNSString:(NSString *)capture$1
                             withComGoodowRealtimeCoreHandler:(id<ComGoodowRealtimeCoreHandler>)capture$2 {
  this$0_ = outer$;
  val$local_ = capture$0;
  val$topic_ = capture$1;
  val$handler_ = capture$2;
  return [super init];
}

- (void)copyAllFieldsTo:(ComGoodowRealtimeChannelImplSimpleBus_$4 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$local_ = val$local_;
  other->val$topic_ = val$topic_;
  other->val$handler_ = val$handler_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "unregister", NULL, "V", 0x1, NULL },
    { "initWithComGoodowRealtimeChannelImplSimpleBus:withBoolean:withNSString:withComGoodowRealtimeCoreHandler:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.goodow.realtime.channel.impl.SimpleBus;", NULL,  },
    { "val$local_", NULL, 0x1012, "Z", NULL,  },
    { "val$topic_", NULL, 0x1012, "Ljava.lang.String;", NULL,  },
    { "val$handler_", NULL, 0x1012, "Lcom.goodow.realtime.core.Handler;", NULL,  },
  };
  static const J2ObjcClassInfo _ComGoodowRealtimeChannelImplSimpleBus_$4 = { 1, "$4", "com.goodow.realtime.channel.impl", "SimpleBus", 0x8000, 2, methods, 4, fields, 0, NULL};
  return &_ComGoodowRealtimeChannelImplSimpleBus_$4;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoodowRealtimeChannelImplSimpleBus_$4)
